<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Yashraj Joshi · AI Engineer · Full‑Stack Developer</title>
  <meta name="description" content="Portfolio of Yashraj Joshi — AI Engineer, Full‑Stack Developer & SEO Specialist. Showcasing production‑ready projects in Python, JavaScript/TypeScript, ML/DL and cloud." />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;600;700&family=Cinzel:wght@600;700&display=swap" rel="stylesheet">
  <meta property="og:title" content="Yashraj Joshi · AI Engineer · Full‑Stack Developer" />
  <meta property="og:description" content="Selected work in AI/ML, full‑stack, data engineering and cloud." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://joshiyrj.github.io" />
  <meta property="og:image" content="https://github.com/joshiyrj.png" />
  <meta name="theme-color" content="#0b0b0f" />
  <style>
    :root{
      --bg:#0b0b0f;          /* deep black */
      --panel:#0f1016;       /* card bg */
      --gold:#e6c25a;        /* rich gold */
      --gold-2:#c9a23a;      /* darker gold */
      --text:#f2f2f2;
      --muted:#b8b8b8;
      --accent: var(--gold);
      --radius:20px;
      --ring: rgba(230,194,90,.25);
      --shadow: 0 10px 30px rgba(0,0,0,.35);
      --font-base:'Space Grotesk',system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
      --font-display:'Cinzel',serif;
    }
    *{box-sizing:border-box}
    html,body{margin:0;height:100%;scroll-behavior:smooth}
    body{
      font-family:var(--font-base);
      background:
        radial-gradient(1200px 800px at 80% -10%, rgba(230,194,90,.12), transparent 60%),
        radial-gradient(900px 600px at -10% 20%, rgba(230,194,90,.10), transparent 55%),
        var(--bg);
      color:var(--text);
      line-height:1.6;
      overflow-x:hidden;
    }
    /* subtle grid + film grain */
    body::before{content:"";position:fixed;inset:0;pointer-events:none;opacity:.05;background-image:linear-gradient(transparent 95%,rgba(255,255,255,.08) 95%),linear-gradient(90deg,transparent 95%,rgba(255,255,255,.08) 95%);background-size:30px 30px}
    body::after{content:"";position:fixed;inset:-50% -50%;pointer-events:none;background:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%"><filter id="n"><feTurbulence type="fractalNoise" baseFrequency=".8" numOctaves="2" stitchTiles="stitch"/></filter><rect width="100%" height="100%" filter="url(%23n)" opacity=".04"/></svg>');}

    a{color:var(--text);text-decoration:none}
    .container{width:min(1200px,92%);margin:0 auto}

    /* Skip link */
    .skip-link{position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden}
    .skip-link:focus{left:16px;top:12px;width:auto;height:auto;background:var(--gold);color:#111;padding:8px 12px;border-radius:8px;z-index:1000}

    header{
      position:sticky;top:0;z-index:50;
      background:linear-gradient(180deg, rgba(11,11,15,.9), rgba(11,11,15,.6));
      backdrop-filter:saturate(1.2) blur(10px);
      border-bottom:1px solid rgba(230,194,90,.15);
    }
    .nav{display:flex;align-items:center;justify-content:space-between;padding:14px 0}
    .brand{display:flex;align-items:center;gap:12px;font-weight:800;letter-spacing:.3px}
    .brand .logo{width:40px;height:40px;border-radius:12px;background:conic-gradient(from 210deg, var(--gold), var(--gold-2));
      display:grid;place-items:center;color:#111;font-weight:800;box-shadow:0 0 0 4px var(--ring),0 10px 30px rgba(230,194,90,.25)}
    .brand .text{font-family:var(--font-display);font-size:22px;letter-spacing:.5px}
    nav a{margin-left:18px;color:var(--muted);font-weight:600}
    nav a:hover{color:var(--text)}

    /* Loader */
    #loader{position:fixed;inset:0;background:radial-gradient(800px 500px at 50% -10%, rgba(230,194,90,.12), transparent 60%), var(--bg);display:grid;place-items:center;z-index:9999}
    .loader-card{width:min(380px,80vw);background:#0e0f13;border:1px solid rgba(230,194,90,.25);border-radius:16px;padding:24px;text-align:center;box-shadow:var(--shadow)}
    .spinner{width:84px;height:84px;margin:0 auto 10px;border-radius:50%;position:relative;background:conic-gradient(from 0deg,var(--gold),transparent 50%,var(--gold));animation:spin 1.2s linear infinite}
    .spinner::after{content:"YJ";position:absolute;inset:8px;border-radius:50%;display:grid;place-items:center;background:#0c0d11;font-family:var(--font-display);font-weight:700;color:var(--gold)}
    .progress{height:8px;background:rgba(230,194,90,.14);border:1px solid rgba(230,194,90,.2);border-radius:999px;overflow:hidden}
    .bar{height:100%;width:0%;background:linear-gradient(90deg,var(--gold),var(--gold-2));box-shadow:0 6px 20px rgba(230,194,90,.35)}
    .load-copy{color:var(--muted);font-size:14px;margin:10px 0 0}
    @keyframes spin{to{transform:rotate(360deg)}}

    /* Hero */
    .hero{padding:96px 0 48px;position:relative}
    .hero::before{content:"";position:absolute;right:-160px;top:-120px;width:420px;height:420px;border-radius:50%;filter:blur(60px);background:radial-gradient(circle at 30% 30%, rgba(230,194,90,.25), transparent 60%)}
    .hero-inner{display:grid;gap:28px;align-items:center;grid-template-columns:1.1fr .9fr}
    @media (max-width:900px){.hero-inner{grid-template-columns:1fr}}
    .eyebrow{font-weight:700;color:var(--gold);letter-spacing:.22em;text-transform:uppercase;font-size:12px}
    .title{
      font-family:var(--font-display);
      font-size:clamp(36px,7vw,64px);font-weight:700;line-height:1.05;letter-spacing:.2px;
      background:linear-gradient(180deg,var(--text),#e6e6e6 60%, var(--gold));
      -webkit-background-clip:text;background-clip:text;color:transparent;
      position:relative
    }
    .title .sparkle{position:absolute;inset:0;background:radial-gradient(8px 8px at var(--x,10%) var(--y,50%), rgba(255,255,255,.9), transparent 40%);mix-blend-mode:screen;opacity:.4;transition:.2s}
    .subtitle{color:var(--muted);font-size:clamp(14px,1.7vw,17px)}
    .cta{display:flex;gap:12px;flex-wrap:wrap;margin-top:14px}
    .btn{padding:12px 16px;border-radius:999px;font-weight:700;border:1px solid rgba(230,194,90,.35);
      background:rgba(230,194,90,.06);transition:.2s ease;display:inline-flex;align-items:center;gap:8px;will-change:transform}
    .btn:hover{transform:translateY(-2px);box-shadow:0 12px 30px rgba(230,194,90,.18)}
    .btn.primary{background:linear-gradient(135deg,var(--gold),var(--gold-2));color:#111;border:none}

    .hero-card{background:linear-gradient(180deg,rgba(230,194,90,.10),rgba(230,194,90,.06));border:1px solid rgba(230,194,90,.25);
      padding:22px;border-radius:var(--radius);box-shadow:var(--shadow)}
    .hero-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    .mini{background:var(--panel);border:1px solid rgba(230,194,90,.18);border-radius:18px;padding:16px}
    .kpi{font-size:22px;font-weight:800}

    /* Section */
    section{padding:56px 0}
    .section-head{display:flex;align-items:end;justify-content:space-between;margin-bottom:18px;gap:12px;flex-wrap:wrap}
    .h2{font-family:var(--font-display);font-weight:700;font-size:28px;letter-spacing:.3px}
    .muted{color:var(--muted)}

    /* Controls */
    .controls{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
    .filters{display:flex;gap:8px;flex-wrap:wrap}
    .chip{padding:8px 12px;border-radius:999px;border:1px solid rgba(230,194,90,.25);background:rgba(230,194,90,.06);font-weight:600;cursor:pointer}
    .chip.active,.chip:hover{background:linear-gradient(135deg,rgba(230,194,90,.35),rgba(230,194,90,.15));}
    .search{display:flex;gap:10px;align-items:center}
    .search input{width:260px;max-width:100%;padding:10px 12px;border-radius:12px;border:1px solid rgba(230,194,90,.25);background:rgba(230,194,90,.06);color:var(--text)}
    .sort select{padding:10px 12px;border-radius:12px;border:1px solid rgba(230,194,90,.25);background:rgba(230,194,90,.06);color:var(--text)}

    /* Project Grid */
    .grid{display:grid;grid-template-columns:repeat(3,1fr);gap:18px}
    @media (max-width:980px){.grid{grid-template-columns:repeat(2,1fr)}}
    @media (max-width:640px){.grid{grid-template-columns:1fr}}
    .card{position:relative;background:linear-gradient(180deg,#0f1016,#0b0c10);border:1px solid rgba(230,194,90,.18);border-radius:18px;padding:0;overflow:hidden;transform:translateZ(0)}
    .thumb{height:160px;background:linear-gradient(135deg, rgba(230,194,90,.18), rgba(230,194,90,.05));border-bottom:1px solid rgba(230,194,90,.18);background-size:cover;background-position:center;filter:saturate(1.05)}
    .card-body{padding:16px}
    .card h3{margin:0 0 8px;font-size:18px;letter-spacing:.3px}
    .meta{display:flex;gap:10px;align-items:center;flex-wrap:wrap;color:var(--muted);font-size:12px}
    .card p{color:#d9d9d9;margin:8px 0 16px;font-size:14px;min-height:44px}
    .card .actions{display:flex;gap:8px;flex-wrap:wrap;position:relative;z-index:2;padding:0 16px 16px}
    .pill{padding:9px 12px;border-radius:12px;border:1px solid rgba(230,194,90,.25);background:rgba(230,194,90,.06);font-weight:700}
    .pill.primary{background:linear-gradient(135deg,var(--gold),var(--gold-2));color:#111;border:none}
    .stretched{position:absolute;inset:0;z-index:1}
    .card:hover{box-shadow:0 18px 60px rgba(0,0,0,.35)}

    /* About */
    .about{display:grid;grid-template-columns:1.1fr .9fr;gap:24px}
    @media (max-width:980px){.about{grid-template-columns:1fr}}
    .about .panel{background:var(--panel);border:1px solid rgba(230,194,90,.18);border-radius:18px;padding:18px}
    .list{display:grid;gap:8px}
    .list li{list-style:none;background:rgba(230,194,90,.06);border:1px solid rgba(230,194,90,.18);padding:10px 12px;border-radius:10px}

    footer{padding:38px 0;border-top:1px solid rgba(230,194,90,.18);color:var(--muted)}

    /* Reveal */
    [data-reveal]{opacity:0;transform:translateY(14px);transition: .6s ease}
    [data-reveal].visible{opacity:1;transform:none}

    /* Modal */
    .modal{position:fixed;inset:0;background:rgba(0,0,0,.65);display:none;align-items:center;justify-content:center;padding:20px;z-index:100}
    .modal.open{display:flex}
    .modal-card{width:min(900px,95%);max-height:85vh;overflow:auto;background:#0c0d11;border:1px solid rgba(230,194,90,.25);border-radius:14px;box-shadow:0 24px 80px rgba(0,0,0,.6)}
    .modal-head{padding:14px 16px;border-bottom:1px solid rgba(230,194,90,.18);display:flex;align-items:center;justify-content:space-between}
    .modal-body{padding:16px}
    .xbtn{background:transparent;border:1px solid rgba(230,194,90,.35);color:var(--text);padding:8px 10px;border-radius:8px}

    /* Cursor ring */
    #ring{position:fixed;top:0;left:0;width:26px;height:26px;border:2px solid rgba(230,194,90,.5);border-radius:50%;pointer-events:none;transform:translate(-50%,-50%);mix-blend-mode:screen;z-index:200;transition:border-color .2s,opacity .2s}
    @media (max-width:900px){#ring{display:none}}

    /* Reduced motion */
    @media (prefers-reduced-motion: reduce){
      [data-reveal]{transition:none}
      .btn:hover{transform:none;box-shadow:none}
      .spinner{animation:none}
    }
  </style>
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Person",
    "name": "Yashraj Joshi",
    "url": "https://joshiyrj.github.io",
    "jobTitle": "AI Engineer, Full‑Stack Developer, SEO Specialist",
    "email": "mailto:joshiyrj@gmail.com",
    "sameAs": [
      "https://github.com/joshiyrj",
      "https://www.linkedin.com/in/yashrajjoshi"
    ]
  }
  </script>
</head>
<body>
  <div id="loader" aria-hidden="true">
    <div class="loader-card">
      <div class="spinner" aria-hidden="true"></div>
      <div class="progress" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-label="Loading">
        <div class="bar" id="bar"></div>
      </div>
      <div class="load-copy">Booting portfolio…</div>
    </div>
  </div>

  <a class="skip-link" href="#work">Skip to work</a>
  <div id="ring"></div>
  <header>
    <div class="container nav">
      <a class="brand" href="#top" aria-label="Home">
        <span class="logo">YJ</span>
        <span class="text">Yashraj Joshi</span>
      </a>
      <nav>
        <a href="#work">Work</a>
        <a href="#about">About</a>
        <a href="#contact">Contact</a>
      </nav>
    </div>
  </header>

  <main id="top" class="container">
    <section class="hero">
      <div class="hero-inner">
        <div>
          <div class="eyebrow">AI • Full‑Stack • SEO</div>
          <h1 class="title" data-reveal>
            Building reliable, beautiful software.
            <span class="sparkle" aria-hidden="true"></span>
          </h1>
          <p class="subtitle" data-reveal>
            I design and ship production‑ready tools across Python/Node, ML, and cloud. Below are projects that solve real problems: reconciliation engines, service‑to‑service gRPC, and practical ML labs.
          </p>
          <div class="cta" data-reveal>
            <a class="btn primary" href="#work">View my work</a>
            <a class="btn" href="https://github.com/joshiyrj" target="_blank" rel="me noopener">GitHub</a>
            <a class="btn" href="Yashraj_Joshi_AI_Engineer_Resume_UPDATED.pdf" target="_blank" rel="noopener">Download Resume</a>
          </div>
        </div>
        <aside class="hero-card" aria-label="Highlights" data-reveal>
          <div class="hero-grid">
            <div class="mini">
              <div class="kpi">2.5+ yrs</div>
              <div class="muted">Building data‑driven apps</div>
            </div>
            <div class="mini">
              <div class="kpi">Cloud‑native</div>
              <div class="muted">GCP · AWS · Docker</div>
            </div>
            <div class="mini">
              <div class="kpi">Stacks</div>
              <div class="muted">Python · TS/Node · React</div>
            </div>
            <div class="mini">
              <div class="kpi">Focus</div>
              <div class="muted">Automation · Analytics · SEO</div>
            </div>
          </div>
        </aside>
      </div>
    </section>

    <section id="work">
      <div class="section-head">
        <div>
          <div class="h2">Selected Work</div>
          <div class="muted">Auto‑populated from my GitHub (live). Curated picks appear first. Use search, tech filters, or sort.</div>
        </div>
        <div class="controls">
          <div class="search">
            <input id="search" placeholder="Press / to search… (e.g., Python, gRPC)" aria-label="Search projects" />
          </div>
          <div class="filters" id="filters"></div>
          <div class="sort"><select id="sort" aria-label="Sort projects">
            <option value="curated">Curated → Stars → Recent</option>
            <option value="stars">Stars</option>
            <option value="updated">Recently Updated</option>
            <option value="name">Name A–Z</option>
          </select></div>
        </div>
      </div>
      <div class="grid" id="projects" data-reveal></div>
      <p class="muted" id="fallbackMsg" style="display:none">Couldn’t load repositories. You can <a href="https://github.com/joshiyrj?tab=repositories" target="_blank" rel="noopener">view everything on GitHub</a>.</p>
    </section>

    <section id="about">
      <div class="section-head">
        <div class="h2">About</div>
      </div>
      <div class="about" data-reveal>
        <div class="panel">
          <p>
            I’m an AI/ML engineer and full‑stack developer from Kolkata who enjoys turning messy real‑world workflows into crisp software.
            I’ve shipped Shopify builds, IoT data pipelines, and ML‑powered automations, with a pragmatic focus on DX, reliability and measurable outcomes.
          </p>
          <ul class="list">
            <li><strong>Languages:</strong> Python, JavaScript/TypeScript, R</li>
            <li><strong>ML:</strong> TensorFlow, Keras, scikit‑learn, Pandas</li>
            <li><strong>Frameworks:</strong> React, Node.js/Express, LoopBack4, gRPC</li>
            <li><strong>Cloud/DevOps:</strong> GCP, AWS, Docker, Git</li>
            <li><strong>Data/BI:</strong> Power BI, Tableau, PostgreSQL, MongoDB, MySQL</li>
            <li><strong>Domains:</strong> Shopify, IoT (MQTT/ESP32), SEO</li>
          </ul>
        </div>
        <div class="panel">
          <p>
            Highlights: Launched a Shopify storefront with technical SEO (+45% organic), built bank↔ledger reconciliation with fuzzy matching,
            and implemented gRPC comms across Node services on GCP/AWS. I care about maintainable code, good docs, and delightful UX.
          </p>
          <p class="muted">Resume → <a href="Yashraj_Joshi_AI_Engineer_Resume_UPDATED.pdf" target="_blank" rel="noopener">PDF</a></p>
        </div>
      </div>
    </section>

    <section id="contact">
      <div class="section-head">
        <div class="h2">Contact</div>
      </div>
      <div class="cta" data-reveal>
        <a class="btn primary" href="mailto:joshiyrj@gmail.com">Email Me</a>
        <a class="btn" href="https://www.linkedin.com/in/yashrajjoshi" target="_blank" rel="me noopener">LinkedIn</a>
        <a class="btn" href="https://github.com/joshiyrj" target="_blank" rel="noopener">GitHub</a>
      </div>
    </section>
  </main>

  <footer>
    <div class="container">
      © <span id="year"></span> Yashraj Joshi • 2025
    </div>
  </footer>

  <!-- README Modal -->
  <div class="modal" id="readmeModal" role="dialog" aria-modal="true" aria-labelledby="readmeTitle">
    <div class="modal-card">
      <div class="modal-head">
        <strong id="readmeTitle">Project README</strong>
        <button class="xbtn" id="readmeClose" aria-label="Close">Close</button>
      </div>
      <div class="modal-body" id="readmeBody"><p class="muted">Loading…</p></div>
    </div>
  </div>

  <script>
    const username = 'joshiyrj';
    const EXCLUDE = new Set(['mqtt','joshiyrj.github.io']); // exclude low-signal or the site repo
    const curated = new Set(['transaction-reconciliation', 'grpc-loopback4', 'ml-models-and-algorithms']); // update if names differ

    const projectsEl = document.getElementById('projects');
    const filtersEl = document.getElementById('filters');
    const searchEl = document.getElementById('search');
    const sortEl = document.getElementById('sort');
    const sparkle = document.querySelector('.sparkle');

    // Loader logic (fake progress + remove after load)
    const loader = document.getElementById('loader');
    const bar = document.getElementById('bar');
    let p = 0; let t = setInterval(()=>{ p = Math.min(100, p + Math.random()*7 + 2); bar.style.width = p+'%'; if(p>=100){ clearInterval(t); setTimeout(()=> loader.style.display='none', 250); } }, 80);
    window.addEventListener('load', ()=>{ p=100; bar.style.width='100%'; setTimeout(()=> loader.style.display='none', 250); });

    // Cursor ring
    const ring = document.getElementById('ring');
    let rx=0, ry=0, tx=0, ty=0; const ease=.18;
    window.addEventListener('mousemove', (e)=>{ tx=e.clientX; ty=e.clientY; sparkle && (sparkle.style.setProperty('--x', (e.clientX/window.innerWidth*100)+'%'), sparkle.style.setProperty('--y', (e.clientY/window.innerHeight*100)+'%')); });
    function raf(){ rx += (tx-rx)*ease; ry += (ty-ry)*ease; ring.style.transform = `translate(${rx-13}px, ${ry-13}px)`; requestAnimationFrame(raf); }
    raf();

    // Magnetic hover for buttons/cards
    const magnets = () => document.querySelectorAll('.btn,.pill,.card');
    window.addEventListener('mousemove', (e)=>{
      magnets().forEach(el=>{
        const r = el.getBoundingClientRect();
        const dx = (e.clientX - (r.left + r.width/2)) / r.width;
        const dy = (e.clientY - (r.top + r.height/2)) / r.height;
        const d = Math.sqrt(dx*dx + dy*dy);
        const m = Math.max(0, 1 - d*1.8);
        el.style.transform = `translate(${dx*6*m}px, ${dy*6*m}px)`;
      })
    });
    ['mouseleave','scroll'].forEach(ev=>window.addEventListener(ev,()=>{ magnets().forEach(el=> el.style.transform='translate(0,0)'); }));

    // Reveal on scroll
    const io = new IntersectionObserver((entries)=>{
      entries.forEach(e=>{ if(e.isIntersecting) e.target.classList.add('visible') })
    },{threshold:.2});
    document.querySelectorAll('[data-reveal]').forEach(el=>io.observe(el));

    // Year
    document.getElementById('year').textContent = new Date().getFullYear();

    // Keyboard shortcuts
    window.addEventListener('keydown', (e)=>{
      if(e.key === '/' && document.activeElement !== searchEl){ e.preventDefault(); searchEl.focus(); }
    });

    // README modal
    const modal = document.getElementById('readmeModal');
    const readmeTitle = document.getElementById('readmeTitle');
    const readmeBody = document.getElementById('readmeBody');
    document.getElementById('readmeClose').onclick = ()=> modal.classList.remove('open');
    modal.addEventListener('click', (e)=>{ if(e.target === modal) modal.classList.remove('open'); });

    // GitHub fetch
    let repos = [];
    async function loadRepos(){
      try{
        const res = await fetch(`https://api.github.com/users/${username}/repos?per_page=100&sort=updated`, {
          headers: { 'Accept': 'application/vnd.github+json' }
        });
        if(!res.ok) throw new Error('GitHub API error: '+res.status);
        repos = (await res.json()).filter(r=>!r.fork && !r.archived && !EXCLUDE.has(r.name));
        hydrate();
      }catch(err){
        console.error(err);
        document.getElementById('fallbackMsg').style.display='block';
      }
    }

    function hydrate(){
      // Sort initial view
      repos.sort(sorter('curated'));
      renderFilters(repos);
      renderRepos(repos);

      searchEl.addEventListener('input', applyControls);
      filtersEl.addEventListener('click', (e)=>{
        const btn = e.target.closest('.chip');
        if(!btn) return;
        document.querySelectorAll('.chip').forEach(c=>c.classList.remove('active'));
        btn.classList.add('active');
        applyControls();
      });
      sortEl.addEventListener('change', applyControls);
    }

    function applyControls(){
      const q = searchEl.value.toLowerCase().trim();
      const activeChip = document.querySelector('.chip.active');
      const lang = activeChip ? activeChip.dataset.lang : 'all';
      const sorted = [...repos].sort(sorter(sortEl.value));
      const filtered = sorted.filter(r => matchRepo(r, q, lang));
      renderRepos(filtered);
    }

    function sorter(mode){
      return (a,b)=>{
        const aCur = curated.has(a.name)?1:0; const bCur = curated.has(b.name)?1:0;
        if(mode==='curated'){
          if(aCur!==bCur) return bCur-aCur;
          if(b.stargazers_count!==a.stargazers_count) return b.stargazers_count - a.stargazers_count;
          return new Date(b.updated_at) - new Date(a.updated_at);
        }
        if(mode==='stars') return (b.stargazers_count - a.stargazers_count) || (new Date(b.updated_at) - new Date(a.updated_at));
        if(mode==='updated') return new Date(b.updated_at) - new Date(a.updated_at);
        if(mode==='name') return a.name.localeCompare(b.name);
        return 0;
      }
    }

    function matchRepo(r, q, lang){
      const hay = `${r.name} ${r.description||''} ${(r.language||'')}`.toLowerCase();
      const qok = !q || hay.includes(q);
      const lok = (lang==='all') || ((r.language||'').toLowerCase() === lang.toLowerCase());
      return qok && lok;
    }

    function renderFilters(repos){
      filtersEl.innerHTML='';
      const langs = Array.from(new Set(repos.map(r=>r.language).filter(Boolean))).sort();
      const all = document.createElement('button');
      all.className='chip active'; all.textContent='All'; all.dataset.lang='all';
      filtersEl.appendChild(all);
      langs.forEach(l=>{
        const b = document.createElement('button');
        b.className='chip'; b.textContent=l; b.dataset.lang=l;
        filtersEl.appendChild(b);
      });
    }

    function timeAgo(iso){
      const diff = (Date.now() - new Date(iso).getTime())/1000;
      const t = (v,u)=>`${Math.floor(v)} ${u} ago`;
      if(diff<60) return t(diff,'sec');
      if(diff<3600) return t(diff/60,'min');
      if(diff<86400) return t(diff/3600,'hr');
      if(diff<2592000) return t(diff/86400,'day');
      if(diff<31536000) return t(diff/2592000,'mo');
      return t(diff/31536000,'yr');
    }

    function renderRepos(list){
      projectsEl.innerHTML='';
      if(!list.length){
        projectsEl.innerHTML = '<p class="muted">No projects found for this filter/search.</p>';
        return;
      }
      list.slice(0, 12).forEach(r=>{
        const full = r.full_name;
        const og = `https://opengraph.githubassets.com/1/${r.owner.login}/${r.name}`;
        const el = document.createElement('article');
        el.className='card';
        el.innerHTML = `
          <div class="thumb" style="background-image:url('${og}')"></div>
          <div class="card-body">
            <h3>${escapeHtml(r.name)}</h3>
            <div class="meta">
              ${r.language?`<span>💻 ${escapeHtml(r.language)}</span>`:''}
              <span>⭐ ${r.stargazers_count}</span>
              <span>↻ ${timeAgo(r.updated_at)}</span>
            </div>
            <p>${escapeHtml(r.description || 'No description yet.')}</p>
          </div>
          <div class="actions">
            ${r.homepage ? `<a class="pill primary" href="${r.homepage}" target="_blank" rel="noopener">Live</a>` : ''}
            <a class="pill" href="${r.html_url}" target="_blank" rel="noopener">Repository</a>
            <a class="pill" href="#" data-r="${full}" onclick="openReadme(event, '${full}')">README</a>
          </div>
          <a class="stretched" href="${r.html_url}" target="_blank" rel="noopener" aria-label="Open ${escapeHtml(r.name)} repository"></a>
        `;
        projectsEl.appendChild(el);
      });
    }

    async function openReadme(ev, full){
      ev.preventDefault();
      readmeTitle.textContent = full + ' — README';
      readmeBody.innerHTML = '<p class="muted">Loading…</p>';
      modal.classList.add('open');
      try{
        // Fetch rendered HTML for README
        const res = await fetch(`https://api.github.com/repos/${full}/readme`, { headers: { 'Accept': 'application/vnd.github.v3.html' } });
        if(!res.ok) throw new Error('README not available');
        const html = await res.text();
        readmeBody.innerHTML = html;
      }catch(err){
        readmeBody.innerHTML = '<p class="muted">README not available. Open the repository to learn more.</p>';
      }
    }

    function escapeHtml(s){
      return s.replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;','\'':'&#39;'}[m]));
    }

    loadRepos();
  </script>
</body>
</html>
